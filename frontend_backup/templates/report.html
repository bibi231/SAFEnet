{% extends "base.html" %}

{% block title %}Submit Report - SAFEnet{% endblock %}

{% block content %}
<div class="auth-container" style="min-height: auto; padding: 4rem 1rem;">
    <div class="auth-card" style="max-width: 800px;">
        <div class="auth-header"
            style="text-align: left; margin-bottom: 2rem; border-bottom: 1px solid var(--border-color); padding-bottom: 2rem;">
            <h2 style="font-size: 2rem; color: var(--primary-dark); margin-bottom: 0.5rem;">Secure Incident Report</h2>
            <p style="color: var(--text-secondary);">Your safety is our priority. Submit your report anonymously and
                securely.</p>

            <div class="alert alert-info" style="margin-top: 1.5rem; display: flex; gap: 1rem; align-items: start;">
                <i class="fas fa-shield-alt" style="font-size: 1.5rem; margin-top: 0.2rem;"></i>
                <div>
                    <strong>100% Anonymous & Secure</strong>
                    <p style="margin-bottom: 0; font-size: 0.9rem;">We do not log your IP address or device information.
                        All data is encrypted.</p>
                </div>
            </div>
        </div>

        <form method="POST" action="{{ url_for('report') }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

            <div class="row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                <div class="form-group">
                    <label for="category" class="form-label">Incident Category <span
                            style="color: var(--danger-color)">*</span></label>
                    <select name="category" id="category" class="form-input" required>
                        <option value="">Select category...</option>
                        <option value="Assault">Physical Assault</option>
                        <option value="Sexual Violence">Sexual Violence</option>
                        <option value="Domestic Violence">Domestic Violence</option>
                        <option value="Theft">Theft/Robbery</option>
                        <option value="Medical Emergency">Medical Emergency</option>
                        <option value="Child Abuse">Child Abuse</option>
                        <option value="Harassment">Harassment</option>
                        <option value="Drug-related">Drug-related Incident</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="incident_date" class="form-label">Date of Incident <span
                            style="color: var(--danger-color)">*</span></label>
                    <input type="date" name="incident_date" id="incident_date" class="form-input" required>
                </div>
            </div>

            <div class="form-group">
                <label for="location" class="form-label">Location <span
                        style="color: var(--danger-color)">*</span></label>
                <div style="position: relative;">
                    <i class="fas fa-map-marker-alt"
                        style="position: absolute; left: 1rem; top: 1rem; color: var(--text-light);"></i>
                    <input type="text" name="location" id="location" class="form-input" style="padding-left: 2.5rem;"
                        placeholder="e.g., Wuse 2, Near Gwarinpa Market" required>
                </div>
                <small style="color: var(--text-light); font-size: 0.8rem; margin-top: 0.5rem; display: block;">
                    Provide a general area or landmark. Specific addresses are optional.
                </small>
            </div>

            <div class="form-group">
                <label for="description" class="form-label">Incident Details <span
                        style="color: var(--danger-color)">*</span></label>
                <textarea name="description" id="description" class="form-input" rows="6"
                    placeholder="Please describe what happened. Include relevant details like time, people involved, or any immediate needs."
                    required minlength="20" style="resize: vertical;"></textarea>
                <small style="color: var(--text-light); float: right;">Minimum 20 characters</small>
            </div>

            <div class="form-actions" style="margin-top: 3rem;">
                <button type="submit" class="btn-block btn-primary"
                    style="padding: 1rem; font-size: 1.1rem; border-radius: var(--radius-md);">
                    <i class="fas fa-paper-plane" style="margin-right: 0.5rem;"></i> Submit Secure Report
                </button>
                <p style="text-align: center; margin-top: 1rem; font-size: 0.9rem; color: var(--text-light);">
                    By clicking submit, your report will be encrypted and sent to our secure server.
                </p>
            </div>
        </form>
    </div>

    <div style="max-width: 800px; margin: 2rem auto 0; text-align: center;">
        <div class="alert alert-warning"
            style="background: #fffbeb; border: 1px solid #fcd34d; color: #92400e; border-radius: var(--radius-md); padding: 1rem;">
            <strong><i class="fas fa-exclamation-circle"></i> Emergency?</strong>
            If you are in immediate danger, please call <strong>112</strong> immediately.
        </div>
    </div>
</div>

<script>
    // Set max date to today
    document.getElementById('incident_date').max = new Date().toISOString().split('T')[0];
</script>
{% endblock %}